{"ast":null,"code":"import React,{useState}from\"react\";import{useTasksContext}from\"../hooks/useTasksContext\";import{useAuthContext}from\"../hooks/useAuthContext\";import\"../css/TaskList.css\";import{TfiCheck,TfiPencil,TfiPencilAlt,TfiTrash}from\"react-icons/tfi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const TaskListItem=_ref=>{let{dragged,dragging,task,...rest}=_ref;const{dispatch}=useTasksContext();const[editTask,setTask]=useState(task);const{user}=useAuthContext();let taskContent;if(task.isEdit){taskContent=/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"input\",{value:editTask.description,onChange:e=>handleChange(\"description\",e.target.value)})});}else{taskContent=/*#__PURE__*/_jsx(_Fragment,{children:task.description});}function handleChange(inputIdentifier,value){setTask({...editTask,[inputIdentifier]:value});console.log(value);}const handleDelete=async()=>{if(!user)return;const response=await fetch(\"https://productivity-workspace-d73580ee4fe9.herokuapp.com/api/tasks/\"+task._id,{method:\"DELETE\",headers:{Authorization:\"Bearer \".concat(user.token)}});const json=await response.json();if(!response.ok){console.log(json.error);}if(response.ok){dispatch({type:\"DELETE_TASK\",payload:json});console.log(\"New task deleted successfully: \",json);}};const handleUpdate=async type=>{if(!user)return;let updatedTask;if(type===\"toggleDone\"){updatedTask={...task,isDone:!task.isDone};}else if(type===\"toggleEdit\"){updatedTask={...task,isEdit:!task.isEdit};}else if(type===\"save\"){updatedTask={...task,isEdit:!task.isEdit,description:editTask.description};}const response=await fetch(\"https://productivity-workspace-d73580ee4fe9.herokuapp.com/api/tasks/\"+task._id,{method:\"PATCH\",body:JSON.stringify(updatedTask),headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(user.token)}});const json=await response.json();if(!response.ok){console.log(json.error);}if(response.ok){dispatch({type:\"UPDATE_TASK\",payload:updatedTask});console.log(\"New task updated successfully: \",json);}};return/*#__PURE__*/_jsx(\"div\",{...rest,className:\"list__item \".concat(dragged?\"list__item--dragged\":\"\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"list__item-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"list__item-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"list-checkbox\",children:/*#__PURE__*/_jsx(\"button\",{className:\"list__item-btn \".concat(task.isDone?\"task-done\":\"\"),onClick:()=>handleUpdate(\"toggleDone\"),children:/*#__PURE__*/_jsx(TfiCheck,{})})}),/*#__PURE__*/_jsx(\"span\",{className:\"list-input\",children:/*#__PURE__*/_jsx(\"span\",{className:\"task-item \".concat(task.isDone?\"task-done\":\"\"),children:taskContent})}),/*#__PURE__*/_jsxs(\"span\",{className:\"list-edit-delete\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"list__item-btn\",onClick:task.isEdit?()=>handleUpdate(\"save\"):()=>handleUpdate(\"toggleEdit\"),children:task.isEdit?/*#__PURE__*/_jsx(TfiPencilAlt,{}):/*#__PURE__*/_jsx(TfiPencil,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"list__item-btn\",onClick:handleDelete,children:/*#__PURE__*/_jsx(TfiTrash,{})})]})]})})});};export default TaskListItem;","map":{"version":3,"names":["React","useState","useTasksContext","useAuthContext","TfiCheck","TfiPencil","TfiPencilAlt","TfiTrash","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TaskListItem","_ref","dragged","dragging","task","rest","dispatch","editTask","setTask","user","taskContent","isEdit","children","value","description","onChange","e","handleChange","target","inputIdentifier","console","log","handleDelete","response","fetch","_id","method","headers","Authorization","concat","token","json","ok","error","type","payload","handleUpdate","updatedTask","isDone","body","JSON","stringify","className","onClick"],"sources":["/Users/dini/Desktop/productivity-workspace/frontend/src/components/TaskListItem.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useTasksContext } from \"../hooks/useTasksContext\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport \"../css/TaskList.css\";\nimport { TfiCheck, TfiPencil, TfiPencilAlt, TfiTrash } from \"react-icons/tfi\";\n\nconst TaskListItem = ({ dragged, dragging, task, ...rest }) => {\n  const { dispatch } = useTasksContext();\n  const [editTask, setTask] = useState(task);\n  const { user } = useAuthContext();\n\n  let taskContent;\n\n  if (task.isEdit) {\n    taskContent = (\n      <>\n        <input value={editTask.description} onChange={e => handleChange(\"description\", e.target.value)} />\n      </>\n    );\n  } else {\n    taskContent = <>{task.description}</>;\n  }\n\n  function handleChange(inputIdentifier, value) {\n    setTask({ ...editTask, [inputIdentifier]: value });\n    console.log(value);\n  }\n\n  const handleDelete = async () => {\n    if (!user) return;\n\n    const response = await fetch(\"https://productivity-workspace-d73580ee4fe9.herokuapp.com/api/tasks/\" + task._id, {\n      method: \"DELETE\",\n      headers: { Authorization: `Bearer ${user.token}` }\n    });\n    const json = await response.json();\n\n    if (!response.ok) {\n      console.log(json.error);\n    }\n    if (response.ok) {\n      dispatch({ type: \"DELETE_TASK\", payload: json });\n      console.log(\"New task deleted successfully: \", json);\n    }\n  };\n\n  const handleUpdate = async type => {\n    if (!user) return;\n\n    let updatedTask;\n    if (type === \"toggleDone\") {\n      updatedTask = { ...task, isDone: !task.isDone };\n    } else if (type === \"toggleEdit\") {\n      updatedTask = { ...task, isEdit: !task.isEdit };\n    } else if (type === \"save\") {\n      updatedTask = { ...task, isEdit: !task.isEdit, description: editTask.description };\n    }\n\n    const response = await fetch(\"https://productivity-workspace-d73580ee4fe9.herokuapp.com/api/tasks/\" + task._id, {\n      method: \"PATCH\",\n      body: JSON.stringify(updatedTask),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${user.token}`\n      }\n    });\n    const json = await response.json();\n\n    if (!response.ok) {\n      console.log(json.error);\n    }\n    if (response.ok) {\n      dispatch({ type: \"UPDATE_TASK\", payload: updatedTask });\n      console.log(\"New task updated successfully: \", json);\n    }\n  };\n\n  return (\n    <div {...rest} className={`list__item ${dragged ? \"list__item--dragged\" : \"\"}`}>\n      <div className=\"list__item-content\">\n        <div className=\"list__item-title\">\n          <span className=\"list-checkbox\">\n            <button className={`list__item-btn ${task.isDone ? \"task-done\" : \"\"}`} onClick={() => handleUpdate(\"toggleDone\")}>\n              <TfiCheck />\n            </button>\n          </span>\n          <span className=\"list-input\">\n            <span className={`task-item ${task.isDone ? \"task-done\" : \"\"}`}>{taskContent}</span>\n          </span>\n          <span className=\"list-edit-delete\">\n            <button className=\"list__item-btn\" onClick={task.isEdit ? () => handleUpdate(\"save\") : () => handleUpdate(\"toggleEdit\")}>\n              {task.isEdit ? <TfiPencilAlt /> : <TfiPencil />}\n            </button>\n            <button className=\"list__item-btn\" onClick={handleDelete}>\n              <TfiTrash />\n            </button>\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TaskListItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}